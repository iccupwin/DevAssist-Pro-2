#!/usr/bin/env python3
"""Создание PDF с кириллическим текстом для тестирования"""

def create_cyrillic_pdf():
    """Создает PDF с кириллическим текстом используя reportlab"""
    from reportlab.pdfgen import canvas
    from reportlab.lib.pagesizes import A4
    from reportlab.pdfbase import pdfmetrics
    from reportlab.pdfbase.ttfonts import TTFont
    
    filename = "test_cyrillic.pdf"
    c = canvas.Canvas(filename, pagesize=A4)
    
    # Регистрируем стандартный шрифт для кириллицы
    try:
        # Пробуем использовать встроенный шрифт с поддержкой Unicode
        c.setFont("Helvetica", 12)
    except:
        c.setFont("Helvetica", 12)
    
    # Кириллический текст для тестирования
    y_position = 750
    
    text_lines = [
        "КОММЕРЧЕСКОЕ ПРЕДЛОЖЕНИЕ",
        "",
        "Компания: ООО 'ТехноСтрой'",
        "Дата: 04 августа 2025 года",
        "",
        "УВАЖАЕМЫЕ КОЛЛЕГИ!",
        "",
        "Представляем Вам коммерческое предложение на разработку",
        "информационной системы для управления строительными проектами.",
        "",
        "1. ОПИСАНИЕ ПРОЕКТА",
        "Создание современной веб-платформы с использованием передовых",
        "технологий для автоматизации бизнес-процессов в строительстве.",
        "",
        "2. ТЕХНОЛОГИЧЕСКИЙ СТЕК",
        "• Backend: Python 3.11, FastAPI, PostgreSQL",
        "• Frontend: React 18, TypeScript, Material-UI",
        "• Инфраструктура: Docker, Kubernetes, Redis",
        "• Интеграции: REST API, WebSocket, OAuth 2.0",
        "",
        "3. КОМАНДА РАЗРАБОТЧИКОВ",
        "• Руководитель проекта: 1 специалист",
        "• Backend разработчики: 3 специалиста",
        "• Frontend разработчики: 2 специалиста",
        "• DevOps инженер: 1 специалист",
        "• QA инженер: 1 специалист",
        "",
        "4. ФИНАНСОВЫЕ УСЛОВИЯ",
        "Общая стоимость разработки: 5 000 000 рублей",
        "",
        "Детализация по этапам:",
        "• Техническое проектирование: 500 000 руб.",
        "• Основная разработка: 3 500 000 руб.",
        "• Тестирование и отладка: 500 000 руб.",
        "• Внедрение и обучение: 500 000 руб.",
        "",
        "5. ВРЕМЕННЫЕ РАМКИ",
        "Полный цикл разработки: 6 месяцев",
        "Первая демо-версия через: 2 месяца",
        "",
        "6. ГАРАНТИЙНЫЕ ОБЯЗАТЕЛЬСТВА",
        "• Техническая поддержка: 12 месяцев",
        "• Устранение критических ошибок: 24 часа",
        "• Обновления безопасности: включены",
        "• Обучение персонала: включено в стоимость",
        "",
        "С уважением,",
        "Команда ООО 'ТехноСтрой'",
        "Телефон: +7 (495) 123-45-67",
        "Email: info@technostroy.ru"
    ]
    
    for line in text_lines:
        try:
            # Кодируем в UTF-8 для правильного отображения
            encoded_line = line.encode('utf-8').decode('utf-8')
            c.drawString(50, y_position, encoded_line)
        except:
            # Fallback для проблемных символов
            c.drawString(50, y_position, line)
        
        y_position -= 20
        if y_position < 50:  # Переходим на новую страницу
            c.showPage()
            c.setFont("Helvetica", 12)
            y_position = 750
    
    c.save()
    print(f"PDF с кириллицей создан: {filename}")
    return filename

if __name__ == "__main__":
    create_cyrillic_pdf()
    print("PDF с кириллическим текстом готов!")