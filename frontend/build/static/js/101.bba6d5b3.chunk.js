/*! For license information please see 101.bba6d5b3.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkdevassist_pro_frontend=self.webpackChunkdevassist_pro_frontend||[]).push([[101],{101:(e,s,t)=>{t.r(s),t.d(s,{UserManagement:()=>k,default:()=>C});var a=t(9950),l=t(5536),r=t(1064),i=t(9975),n=t(7255),c=t(2607),d=t(3147),o=t(9655);const x=(0,o.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),m=(0,o.A)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var h=t(8406),u=t(4215),p=t(7838);const g=(0,o.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),j=(0,o.A)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var v=t(5492),f=t(8108),y=t(983),N=t(4885),b=t(8249),w=t(8299),S=t(4414);const A=[{id:1,email:"john.doe@example.com",full_name:"\u0418\u0432\u0430\u043d \u041f\u0435\u0442\u0440\u043e\u0432",firstName:"\u0418\u0432\u0430\u043d",lastName:"\u041f\u0435\u0442\u0440\u043e\u0432",role:"admin",avatar:"",isEmailVerified:!0,is2FAEnabled:!0,is_active:!0,is_verified:!0,is_superuser:!0,lastActivity:new Date(Date.now()-18e5).toISOString(),apiCallsCount:1234,analysesCount:89,totalCosts:45.67,registrationSource:"website",subscription:{plan:"Professional",status:"active",expiresAt:new Date(Date.now()+2592e6).toISOString(),autoRenew:!0},preferences:{language:"ru",theme:"dark",notifications:{email:!0,push:!0}},created_at:"2024-01-15T00:00:00Z",updated_at:(new Date).toISOString(),lastLoginAt:new Date(Date.now()-18e5).toISOString()},{id:2,email:"jane.smith@example.com",full_name:"\u0410\u043d\u043d\u0430 \u041a\u043e\u0437\u043b\u043e\u0432\u0430",firstName:"\u0410\u043d\u043d\u0430",lastName:"\u041a\u043e\u0437\u043b\u043e\u0432\u0430",role:"user",avatar:"",isEmailVerified:!0,is2FAEnabled:!1,is_active:!0,is_verified:!0,is_superuser:!1,lastActivity:new Date(Date.now()-72e5).toISOString(),apiCallsCount:456,analysesCount:23,totalCosts:12.34,registrationSource:"google",subscription:{plan:"Premium",status:"active",expiresAt:new Date(Date.now()+1296e6).toISOString(),autoRenew:!1},preferences:{language:"ru",theme:"light",notifications:{email:!0,push:!1}},created_at:"2024-02-10T00:00:00Z",updated_at:(new Date).toISOString(),lastLoginAt:new Date(Date.now()-72e5).toISOString()},{id:3,email:"mike.johnson@example.com",full_name:"\u041c\u0438\u0445\u0430\u0438\u043b \u0421\u0438\u0434\u043e\u0440\u043e\u0432",firstName:"\u041c\u0438\u0445\u0430\u0438\u043b",lastName:"\u0421\u0438\u0434\u043e\u0440\u043e\u0432",role:"user",avatar:"",isEmailVerified:!1,is2FAEnabled:!1,is_active:!1,is_verified:!1,is_superuser:!1,lastActivity:new Date(Date.now()-6048e5).toISOString(),apiCallsCount:12,analysesCount:1,totalCosts:.89,registrationSource:"website",subscription:{plan:"Free",status:"active",expiresAt:new Date(Date.now()+31536e6).toISOString(),autoRenew:!1},preferences:{language:"ru",theme:"system",notifications:{email:!1,push:!1}},created_at:"2024-06-01T00:00:00Z",updated_at:(new Date).toISOString(),lastLoginAt:new Date(Date.now()-6048e5).toISOString()}],k=e=>{let{className:s=""}=e;const[t,o]=(0,a.useState)([]),[k,C]=(0,a.useState)({}),[_,D]=(0,a.useState)("created_at"),[M,P]=(0,a.useState)("desc"),[$,z]=(0,a.useState)(1),[I,O]=(0,a.useState)(10),[L,U]=(0,a.useState)([]),[E,F]=(0,a.useState)(!1),[R,q]=(0,a.useState)(!1);(0,a.useEffect)(()=>{T()},[$,I]);const T=async()=>{q(!0);try{const e=await w.Z.getUsers($,I);e.success?o(e.data.users):o(A)}catch(e){o(A)}finally{q(!1)}},Z=(0,a.useMemo)(()=>{let e=[...t];if(k.search){const s=k.search.toLowerCase();e=e.filter(e=>e.full_name.toLowerCase().includes(s)||e.email.toLowerCase().includes(s))}return k.role&&(e=e.filter(e=>e.role===k.role)),k.status&&(e=e.filter(e=>"active"===k.status?e.is_active:"banned"!==k.status||!e.is_active)),k.plan&&(e=e.filter(e=>e.subscription.plan===k.plan)),e.sort((e,s)=>{let t=e[_],a=s[_];return void 0===t&&(t=""),void 0===a&&(a=""),"string"===typeof t&&(t=t.toLowerCase()),"string"===typeof a&&(a=a.toLowerCase()),t<a?"asc"===M?-1:1:t>a?"asc"===M?1:-1:0}),e},[t,k,_,M]),B={page:$,pageSize:I,total:Z.length,totalPages:Math.ceil(Z.length/I)},H=Z.slice(($-1)*I,$*I),V=e=>{_===e?P("asc"===M?"desc":"asc"):(D(e),P("asc"))},J=e=>{const s=new Date(e),t=(new Date).getTime()-s.getTime(),a=Math.floor(t/864e5),l=Math.floor(t/36e5),r=Math.floor(t/6e4);return r<60?`${r}\u043c \u043d\u0430\u0437\u0430\u0434`:l<24?`${l}\u0447 \u043d\u0430\u0437\u0430\u0434`:1===a?"\u0412\u0447\u0435\u0440\u0430":a<7?`${a}\u0434 \u043d\u0430\u0437\u0430\u0434`:s.toLocaleDateString("ru-RU")},G=e=>"admin"===e?l.A:r.A,K=e=>{switch(e){case"admin":return"text-yellow-500";case"user":return"text-blue-500";default:return"text-gray-500"}},Q=e=>e.is_active?"Premium"===e.subscription.plan||"Professional"===e.subscription.plan?(0,S.jsx)("span",{className:"px-2 py-1 text-xs bg-purple-500/20 text-purple-400 rounded-full",children:e.subscription.plan}):(0,S.jsx)("span",{className:"px-2 py-1 text-xs bg-green-500/20 text-green-400 rounded-full",children:"Active"}):(0,S.jsx)("span",{className:"px-2 py-1 text-xs bg-red-500/20 text-red-400 rounded-full",children:"Banned"});return(0,S.jsxs)("div",{className:`space-y-6 ${s}`,children:[(0,S.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0",children:[(0,S.jsxs)("div",{children:[(0,S.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[(0,S.jsx)(i.A,{className:"h-8 w-8"}),(0,S.jsx)("span",{children:"User Management"})]}),(0,S.jsx)("p",{className:"text-gray-400 mt-1",children:"Manage users, roles, and permissions"})]}),(0,S.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,S.jsxs)(N.$,{variant:"outline",size:"sm",children:[(0,S.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,S.jsxs)(N.$,{size:"sm",children:[(0,S.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]}),(0,S.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,S.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center space-y-4 lg:space-y-0 lg:space-x-4",children:[(0,S.jsxs)("div",{className:"flex-1 relative",children:[(0,S.jsx)(d.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,S.jsx)(b.p,{placeholder:"Search users by name or email...",value:k.search||"",onChange:e=>C(s=>({...s,search:e.target.value})),className:"pl-10 bg-gray-900 border-gray-600"})]}),(0,S.jsxs)(N.$,{variant:"outline",onClick:()=>F(!E),className:"flex items-center space-x-2",children:[(0,S.jsx)(x,{className:"h-4 w-4"}),(0,S.jsx)("span",{children:"Filters"})]})]}),E&&(0,S.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role"}),(0,S.jsxs)("select",{value:k.role||"",onChange:e=>C(s=>({...s,role:e.target.value||void 0})),className:"w-full bg-gray-900 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[(0,S.jsx)("option",{value:"",children:"All Roles"}),(0,S.jsx)("option",{value:"admin",children:"Admin"}),(0,S.jsx)("option",{value:"user",children:"User"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,S.jsxs)("select",{value:k.status||"",onChange:e=>C(s=>({...s,status:e.target.value||void 0})),className:"w-full bg-gray-900 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[(0,S.jsx)("option",{value:"",children:"All Status"}),(0,S.jsx)("option",{value:"active",children:"Active"}),(0,S.jsx)("option",{value:"banned",children:"Banned"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Plan"}),(0,S.jsxs)("select",{value:k.plan||"",onChange:e=>C(s=>({...s,plan:e.target.value||void 0})),className:"w-full bg-gray-900 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[(0,S.jsx)("option",{value:"",children:"All Plans"}),(0,S.jsx)("option",{value:"Free",children:"Free"}),(0,S.jsx)("option",{value:"Premium",children:"Premium"}),(0,S.jsx)("option",{value:"Professional",children:"Professional"})]})]})]})})]}),L.length>0&&(0,S.jsx)("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("span",{className:"text-blue-400",children:[L.length," user(s) selected"]}),(0,S.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,S.jsx)(N.$,{size:"sm",variant:"outline",children:"Ban Selected"}),(0,S.jsx)(N.$,{size:"sm",variant:"outline",children:"Upgrade Selected"}),(0,S.jsx)(N.$,{size:"sm",variant:"outline",children:"Export Selected"})]})]})}),(0,S.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,S.jsx)("div",{className:"overflow-x-auto",children:(0,S.jsxs)("table",{className:"w-full",children:[(0,S.jsx)("thead",{className:"bg-gray-900 border-b border-gray-700",children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{className:"p-4 text-left",children:(0,S.jsx)("input",{type:"checkbox",checked:L.length===H.length&&H.length>0,onChange:()=>{L.length===H.length?U([]):U(H.map(e=>Number(e.id)))},className:"rounded border-gray-600 bg-gray-700"})}),(0,S.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-300 cursor-pointer hover:text-white",onClick:()=>V("full_name"),children:(0,S.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,S.jsx)("span",{children:"User"}),(0,S.jsx)(m,{className:"h-4 w-4"})]})}),(0,S.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-300 cursor-pointer hover:text-white",onClick:()=>V("role"),children:(0,S.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,S.jsx)("span",{children:"Role"}),(0,S.jsx)(m,{className:"h-4 w-4"})]})}),(0,S.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-300",children:"Status"}),(0,S.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-300",children:"Activity"}),(0,S.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-300",children:"Stats"}),(0,S.jsx)("th",{className:"p-4 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),(0,S.jsx)("tbody",{className:"divide-y divide-gray-700",children:H.map(e=>{const s=G(e.role);return(0,S.jsxs)("tr",{className:"hover:bg-gray-700/50",children:[(0,S.jsx)("td",{className:"p-4",children:(0,S.jsx)("input",{type:"checkbox",checked:L.includes(Number(e.id)),onChange:()=>{return s=Number(e.id),void U(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"rounded border-gray-600 bg-gray-700"})}),(0,S.jsx)("td",{className:"p-4",children:(0,S.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,S.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,S.jsxs)("span",{className:"text-white font-medium",children:[e.firstName[0],e.lastName[0]]})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"font-medium text-white",children:e.full_name}),(0,S.jsx)("p",{className:"text-sm text-gray-400",children:e.email})]})]})}),(0,S.jsx)("td",{className:"p-4",children:(0,S.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,S.jsx)(s,{className:`h-4 w-4 ${K(e.role)}`}),(0,S.jsx)("span",{className:"text-gray-300 capitalize",children:e.role})]})}),(0,S.jsx)("td",{className:"p-4",children:Q(e)}),(0,S.jsx)("td",{className:"p-4",children:(0,S.jsxs)("div",{className:"text-sm",children:[(0,S.jsx)("p",{className:"text-gray-300",children:J(e.lastActivity)}),(0,S.jsxs)("p",{className:"text-gray-500",children:["Joined ",new Date(e.created_at).toLocaleDateString("ru-RU")]})]})}),(0,S.jsx)("td",{className:"p-4",children:(0,S.jsxs)("div",{className:"text-sm space-y-1",children:[(0,S.jsxs)("div",{className:"flex items-center space-x-1 text-gray-300",children:[(0,S.jsx)(h.A,{className:"h-3 w-3"}),(0,S.jsxs)("span",{children:[e.apiCallsCount," calls"]})]}),(0,S.jsxs)("div",{className:"flex items-center space-x-1 text-gray-300",children:[(0,S.jsx)(u.A,{className:"h-3 w-3"}),(0,S.jsxs)("span",{children:["$",e.totalCosts.toFixed(2)]})]})]})}),(0,S.jsx)("td",{className:"p-4",children:(0,S.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,S.jsx)(N.$,{size:"sm",variant:"outline",children:(0,S.jsx)(p.A,{className:"h-4 w-4"})}),(0,S.jsx)(N.$,{size:"sm",variant:"outline",children:(0,S.jsx)(g,{className:"h-4 w-4"})}),(0,S.jsx)(N.$,{size:"sm",variant:"outline",children:e.is_active?(0,S.jsx)(j,{className:"h-4 w-4"}):(0,S.jsx)(v.A,{className:"h-4 w-4"})})]})})]},e.id)})})]})}),(0,S.jsx)("div",{className:"bg-gray-900 px-4 py-3 border-t border-gray-700",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{className:"text-sm text-gray-400",children:["Showing ",($-1)*I+1," to ",Math.min($*I,B.total)," of ",B.total," users"]}),(0,S.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,S.jsxs)(N.$,{size:"sm",variant:"outline",onClick:()=>z(e=>Math.max(1,e-1)),disabled:1===$,children:[(0,S.jsx)(f.A,{className:"h-4 w-4 mr-1"}),"Previous"]}),(0,S.jsxs)("span",{className:"text-sm text-gray-400",children:["Page ",$," of ",B.totalPages]}),(0,S.jsxs)(N.$,{size:"sm",variant:"outline",onClick:()=>z(e=>Math.min(B.totalPages,e+1)),disabled:$===B.totalPages,children:["Next",(0,S.jsx)(y.A,{className:"h-4 w-4 ml-1"})]})]})]})})]})]})},C=k},2607:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(9655).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4215:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(9655).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},7255:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(9655).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])}}]);